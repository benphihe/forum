<!DOCTYPE html>
<html>
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@900&display=swap" rel="stylesheet">
  <title>acceuil</title>
  <link rel="stylesheet" type="text/css" href="/STATIC/CSS/postsolo.css">  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body class="page-acceuil" >
  <div class="header">
    <a onclick="window.location.href='/'">YBLOG</a>
    <form class="search-bar" action="/search" method="get">
      <input type="text" name="q" placeholder="Rechercher sur YBLOG" >
    </form>
  </div>
  <div class="menu-box"> 
    <label for="menu-cb" class="menu-label">
      <div class="menu-button">
        <svg viewBox="0 0 32 32" fill="#666">
          <rect x="0" y="4" rx="3" ry="3" width="32" height="3" />
          <rect x="0" y="14" rx="3" ry="3" width="32" height="3" />
          <rect x="0" y="24" rx="3" ry="3" width="32" height="3" />
                  </svg>
                </div>
              </label>
              <input id="menu-cb" type="checkbox" class="menu-cb">
              <nav class="menu-nav">
                <ul>
                  <li class="menu-item"><a onclick="window.location.href='inscription'">account <i class="fa-solid fa-user"></i></a></li>
                  <li class="menu-item"><a onclick="window.location.href='addpost'">Post <i class="fa-regular fa-comments"></i></a></li>
                  <li class="menu-item"><a onclick="window.location.href='rules'">Rules <i class="fa-solid fa-scale-unbalanced-flip"></i></a></li>
                </ul>
              </nav>

              <div>
                  <div class="content-wrapper">
                  <h1>{{.Post.id_post}}</h1>
                  <p>Utilisateur: {{.Post.pseudo}}</p>
                  <p>Contenu: {{.Post.content_post}}</p>
                  <p>Catégorie: {{.Post.category}}</p>j
              
                  <h2>Commentaires</h2>
                      

                    <h1>Insérer un commentaire</h1>
                    <form id="commentForm" method="POST" action="/addComment">
                      <label for="content">Contenu du commentaire:</label><br>
                      <textarea id="content" name="content" required></textarea><br>
                      <input type="submit" id="submit" value="Soumettre">
                    </form>
              </div>
            </div>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            <script>
            $(document).ready(function(){
              $("#commentForm").on("submit", function(event){
                event.preventDefault();

                $.ajax({
                  url: '/addComment',
                  type: 'post',
                  data: $(this).serialize(),
                  success: function(){
                    alert("Commentaire ajouté avec succès !");
                  },
                  error: function(jqXHR, textStatus, errorThrown){
                    console.log("jqXHR: ", jqXHR);
                    console.log("textStatus: ", textStatus);
                    console.log("errorThrown: ", errorThrown);
                    alert("Une erreur s'est produite lors de l'ajout du commentaire. Veuillez consulter la console pour plus de détails.");
                  }
                });
              });
            });
            </script>

            </body>
          </html>